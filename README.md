# sv - Supervisorè¿›ç¨‹ç®¡ç†å·¥å…· ğŸš€

ä¸€ä¸ªåŸºäºGoè¯­è¨€å¼€å‘çš„ç°ä»£åŒ–Supervisorè¿›ç¨‹ç®¡ç†å·¥å…·ï¼Œé‡‡ç”¨æ¨¡å—åŒ–æ¶æ„è®¾è®¡ï¼Œæ”¯æŒåºå·æ“ä½œã€æ™ºèƒ½é…ç½®æ£€æµ‹å’Œç³»ç»ŸæœåŠ¡ç®¡ç†ï¼Œè®©è¿›ç¨‹ç®¡ç†æ›´åŠ ä¾¿æ·ï¼

## âœ¨ æ ¸å¿ƒç‰¹æ€§

- ğŸ¯ **åºå·åŒ–æ“ä½œ** - ä½¿ç”¨æ•°å­—åºå·ä»£æ›¿é•¿è¿›ç¨‹åï¼Œæå‡è¿ç»´æ•ˆç‡
- ğŸ“Š **ç¾è§‚è¡¨æ ¼æ˜¾ç¤º** - Unicodeç›´çº¿è¾¹æ¡†ï¼Œå®Œç¾å¯¹é½ï¼Œå½©è‰²çŠ¶æ€+å›¾æ ‡
- ğŸ”§ **çµæ´»è¿›ç¨‹æ§åˆ¶** - æ”¯æŒå•ä¸ªã€å¤šä¸ªã€èŒƒå›´ã€æ··åˆæ“ä½œæ ¼å¼
- ğŸŒ **è¿œç¨‹æœåŠ¡å™¨ç®¡ç†** - æ”¯æŒè®¤è¯è¿œç¨‹SupervisoræœåŠ¡å™¨
- ğŸ› ï¸ **æ™ºèƒ½é…ç½®æ£€æµ‹** - è‡ªåŠ¨æ£€æµ‹å’Œé…ç½®Supervisor RPCåŠŸèƒ½
- ğŸ”§ **ç³»ç»ŸæœåŠ¡é›†æˆ** - æ”¯æŒå°†å·¥å…·è‡ªèº«å®‰è£…ä¸ºç³»ç»ŸæœåŠ¡ï¼Œè‡ªåŠ¨åˆ›å»ºç¬¦å·é“¾æ¥
- ğŸ’¡ **æ™ºèƒ½é”™è¯¯å¤„ç†** - å‹å¥½çš„ä¸­æ–‡é”™è¯¯æç¤ºå’Œè§£å†³å»ºè®®
- ğŸ”„ **åŒæ¨¡å¼æ¶æ„** - RPCä¼˜å…ˆï¼Œå‘½ä»¤è¡Œæ¨¡å¼è‡ªåŠ¨å›é€€ï¼Œç¡®ä¿å…¼å®¹æ€§
- âš¡ **æè‡´æ€§èƒ½** - Goè¯­è¨€å¼€å‘ï¼Œå•äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œè¶…å¿«å¯åŠ¨é€Ÿåº¦

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

é¡¹ç›®é‡‡ç”¨æ¸…æ™°çš„æ¨¡å—åŒ–æ¶æ„è®¾è®¡ï¼ŒèŒè´£åˆ†ç¦»ï¼š

```
sv/
â”œâ”€â”€ main.go                    # ä¸»ç¨‹åºå…¥å£ï¼ˆ23è¡Œï¼Œæç®€è®¾è®¡ï¼‰
â”œâ”€â”€ build.sh                   # æ„å»ºè„šæœ¬
â”œâ”€â”€ pkg/                       # æ ¸å¿ƒåŒ…ç›®å½•
â”‚   â”œâ”€â”€ cli/                   # CLIåº”ç”¨å±‚
â”‚   â”‚   â”œâ”€â”€ app.go            # CLIåº”ç”¨é€»è¾‘
â”‚   â”‚   â””â”€â”€ renderer.go       # æ¸²æŸ“å™¨
â”‚   â”œâ”€â”€ supervisor/            # Supervisoræ ¸å¿ƒåŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ rpc_client.go     # XML-RPCå®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ config_detector.go # é…ç½®æ£€æµ‹å™¨
â”‚   â”‚   â”œâ”€â”€ service_manager.go # ç³»ç»ŸæœåŠ¡ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ process_control.go # è¿›ç¨‹æ§åˆ¶
â”‚   â”‚   â””â”€â”€ types.go          # æ•°æ®ç»“æ„å®šä¹‰
â”‚   â””â”€â”€ utils/                 # å·¥å…·å‡½æ•°
â”‚       â””â”€â”€ common.go         # é€šç”¨å·¥å…·å‡½æ•°
â”œâ”€â”€ *.go                      # æµ‹è¯•æ–‡ä»¶ï¼ˆå®Œæ•´æµ‹è¯•è¦†ç›–ï¼‰
â”œâ”€â”€ go.mod                    # Goæ¨¡å—ä¾èµ–ï¼ˆGo 1.23.0+ï¼‰
â””â”€â”€ README.md                 # é¡¹ç›®æ–‡æ¡£
```

### æ ¸å¿ƒç»„ä»¶

- **CLIåº”ç”¨å±‚**: è´Ÿè´£å‘½ä»¤è§£æã€å‚æ•°éªŒè¯å’Œç”¨æˆ·äº¤äº’
- **ä¸šåŠ¡é€»è¾‘å±‚**: Supervisoré€šä¿¡ã€è¿›ç¨‹ç®¡ç†ã€é…ç½®æ£€æµ‹
- **å·¥å…·å‡½æ•°å±‚**: é€šç”¨å·¥å…·ã€æ•°æ®ç»“æ„ã€æ˜¾ç¤ºæ ¼å¼åŒ–
- **ç³»ç»ŸæœåŠ¡å±‚**: è·¨å¹³å°æœåŠ¡ç®¡ç†å’Œå®ˆæŠ¤è¿›ç¨‹

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Go 1.23.0+
- Supervisor 3.x+

### å®‰è£…ç¼–è¯‘

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/x1t/sv.git
cd sv

# å®‰è£…ä¾èµ–
go mod tidy

# ä½¿ç”¨æ„å»ºè„šæœ¬ï¼ˆæ¨èï¼Œè¾“å‡ºåˆ°distç›®å½•ï¼‰
./build.sh

# æˆ–è€…æ‰‹åŠ¨ç¼–è¯‘
go build -ldflags="-s -w" -o sv main.go

# äº¤å‰ç¼–è¯‘
GOOS=linux GOARCH=amd64 go build -o sv-linux-amd64 main.go
GOOS=windows GOARCH=amd64 go build -o sv-windows-amd64.exe main.go
GOOS=darwin GOARCH=amd64 go build -o sv-darwin-amd64 main.go
```

### åŸºæœ¬ä½¿ç”¨

```bash
# æŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹çŠ¶æ€ï¼ˆå¸¦åºå·å’Œå®Œç¾è¡¨æ ¼æ˜¾ç¤ºï¼‰
./sv status
./sv list      # åŒstatus

# é‡å¯åºå·ä¸º1çš„è¿›ç¨‹
./sv restart 1

# åœæ­¢åºå·ä¸º2ã€4ã€6çš„è¿›ç¨‹
./sv stop 2 4 6

# å¯åŠ¨åºå·1åˆ°3çš„æ‰€æœ‰è¿›ç¨‹
./sv start 1-3

# ä½¿ç”¨è¿›ç¨‹åæ“ä½œï¼ˆå…¼å®¹ä¼ ç»Ÿæ–¹å¼ï¼‰
./sv restart nginx redis

# æ··åˆä½¿ç”¨å„ç§æ ¼å¼
./sv restart 1 nginx 3-5

# å®‰è£…ä¸ºç³»ç»ŸæœåŠ¡ï¼ˆè‡ªåŠ¨åˆ›å»ºç¬¦å·é“¾æ¥ï¼‰
sudo ./sv service install
```

## ğŸ“‹ å‘½ä»¤å‚è€ƒ

### ä¸»è¦å‘½ä»¤

| å‘½ä»¤ | æè¿° | ç¤ºä¾‹ |
|------|------|------|
| `status` | æ˜¾ç¤ºæ‰€æœ‰è¿›ç¨‹çŠ¶æ€ | `./sv status` |
| `list` | æ˜¾ç¤ºæ‰€æœ‰è¿›ç¨‹çŠ¶æ€ï¼ˆåŒstatusï¼‰ | `./sv list` |
| `start` | å¯åŠ¨æŒ‡å®šè¿›ç¨‹ | `./sv start 1` |
| `stop` | åœæ­¢æŒ‡å®šè¿›ç¨‹ | `./sv stop 1-3` |
| `restart` | é‡å¯æŒ‡å®šè¿›ç¨‹ | `./sv restart nginx` |
| `service` | ç³»ç»ŸæœåŠ¡ç®¡ç† | `./sv service install` |
| `help` | æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ | `./sv help` |

### ç³»ç»ŸæœåŠ¡å‘½ä»¤

| å­å‘½ä»¤ | æè¿° | ç¤ºä¾‹ |
|--------|------|------|
| `install` | å®‰è£…ä¸ºç³»ç»ŸæœåŠ¡ | `./sv service install` |
| `uninstall` | å¸è½½ç³»ç»ŸæœåŠ¡ | `./sv service uninstall` |
| `start` | å¯åŠ¨ç³»ç»ŸæœåŠ¡ | `./sv service start` |
| `stop` | åœæ­¢ç³»ç»ŸæœåŠ¡ | `./sv service stop` |
| `restart` | é‡å¯ç³»ç»ŸæœåŠ¡ | `./sv service restart` |
| `status` | æŸ¥çœ‹æœåŠ¡çŠ¶æ€ | `./sv service status` |

### è¿›ç¨‹å‚æ•°æ ¼å¼

| æ ¼å¼ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `åºå·` | ä½¿ç”¨æ•°å­—åºå· | `./sv restart 1` |
| `åç§°` | ä½¿ç”¨è¿›ç¨‹åç§° | `./sv restart myapp` |
| `å¤šä¸ª` | ç©ºæ ¼åˆ†éš”å¤šä¸ªå‚æ•° | `./sv restart 1 3 5` |
| `èŒƒå›´` | æ¨ªçº¿è¡¨ç¤ºåºå·èŒƒå›´ | `./sv restart 1-5` |
| `æ··åˆ` | æ··åˆä½¿ç”¨å„ç§æ ¼å¼ | `./sv restart 1 nginx 3-5` |

## ğŸ”§ ç¯å¢ƒé…ç½®

### Supervisorè¿æ¥é…ç½®

```bash
# Supervisor RPCæœåŠ¡å™¨åœ°å€
export SUPERVISOR_HOST="http://localhost:9001/RPC2"

# å¦‚æœéœ€è¦è®¤è¯
export SUPERVISOR_USER="your_username"
export SUPERVISOR_PASSWORD="your_password"
```

### é…ç½®ç¤ºä¾‹

```bash
# æœ¬åœ°é»˜è®¤é…ç½®ï¼ˆä¼šè‡ªåŠ¨æ£€æµ‹å’Œé…ç½®RPCåŠŸèƒ½ï¼‰
./sv status

# è¿œç¨‹æœåŠ¡å™¨é…ç½®
SUPERVISOR_HOST="http://192.168.1.100:9001/RPC2" ./sv status

# å¸¦è®¤è¯çš„é…ç½®
SUPERVISOR_HOST="http://remote-server:9001/RPC2" \
SUPERVISOR_USER="admin" \
SUPERVISOR_PASSWORD="secret123" \
./sv status
```

### æ™ºèƒ½é…ç½®æ£€æµ‹

å·¥å…·ä¼šè‡ªåŠ¨æ£€æµ‹Supervisoré…ç½®ï¼š
- **è‡ªåŠ¨æ£€æµ‹**: æ‰«æç°æœ‰Supervisoré…ç½®æ–‡ä»¶
- **ç¼ºå¤±é…ç½®**: è‡ªåŠ¨æ·»åŠ å¿…è¦çš„RPCå’ŒHTTPæœåŠ¡å™¨é…ç½®
- **é…ç½®éªŒè¯**: éªŒè¯é…ç½®æ­£ç¡®æ€§å’Œå¯ç”¨æ€§
- **ä¼˜é›…é™çº§**: é…ç½®å¤±è´¥æ—¶è‡ªåŠ¨å›é€€åˆ°å‘½ä»¤è¡Œæ¨¡å¼

### å¿…éœ€çš„Supervisoré…ç½®

ç¡®ä¿`supervisord.conf`åŒ…å«ä»¥ä¸‹é…ç½®ï¼š

```ini
[inet_http_server]
port=127.0.0.1:9001
username=user
password=pass

[rpcinterface:supervisor]
supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface

[supervisord]
rpcinterface_files = supervisord
```

## ğŸ”§ ç³»ç»ŸæœåŠ¡ç®¡ç†

### å®‰è£…ä¸ºç³»ç»ŸæœåŠ¡

```bash
# å®‰è£…svä¸ºç³»ç»ŸæœåŠ¡
./sv service install

# å¯åŠ¨æœåŠ¡
./sv service start

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
./sv service status

# åœæ­¢æœåŠ¡
./sv service stop

# å¸è½½æœåŠ¡
./sv service uninstall
```

### å®ˆæŠ¤è¿›ç¨‹æ¨¡å¼

ç³»ç»ŸæœåŠ¡æ¨¡å¼ä¸‹ï¼Œsvä¼šï¼š
- åå°æŒç»­è¿è¡Œ
- æä¾›è¿›ç¨‹ç›‘æ§å’Œç®¡ç†åŠŸèƒ½
- æ”¯æŒç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨è¿è¡Œ
- è·¨å¹³å°å…¼å®¹ï¼ˆLinux systemdã€Windows serviceç­‰ï¼‰

## ğŸ“Š çŠ¶æ€è¯´æ˜

| çŠ¶æ€ä»£ç  | çŠ¶æ€åç§° | é¢œè‰² | å›¾æ ‡ |
|----------|----------|------|------|
| 20 | RUNNING | ç»¿è‰² | âœ… è¿è¡Œä¸­ |
| 10 | STARTING | é»„è‰² | ğŸš€ å¯åŠ¨ä¸­ |
| 30 | STOPPING | é»„è‰² | â¹ï¸ åœæ­¢ä¸­ |
| 0 | STOPPED | ç™½è‰² | â¸ï¸ å·²åœæ­¢ |
| 100 | FATAL | çº¢è‰² | âŒ è‡´å‘½é”™è¯¯ |
| 200 | BACKOFF | é»„è‰² | âš ï¸ é‡è¯•ä¸­ |

## ğŸŒŸ è¾“å‡ºç¤ºä¾‹

### è¿›ç¨‹çŠ¶æ€æ˜¾ç¤ºï¼ˆæœ€æ–°ç‰ˆæœ¬ï¼‰

```
ğŸ” Supervisorè¿›ç¨‹çŠ¶æ€ (å…±5ä¸ªè¿›ç¨‹)
â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åºå· â”‚         åç§°         â”‚  çŠ¶æ€   â”‚   PID   â”‚    è¿è¡Œæ—¶é—´     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1    â”‚ agent:agent_00       â”‚ RUNNING â”‚ 3836860 â”‚ 4å°æ—¶50åˆ†é’Ÿ06ç§’ â”‚
â”‚ 2    â”‚ hysteria:hysteria_00 â”‚ RUNNING â”‚ 3870703 â”‚ 2å°æ—¶07åˆ†é’Ÿ33ç§’ â”‚
â”‚ 3    â”‚ iperf3:iperf3_00     â”‚ RUNNING â”‚ 3870876 â”‚ 2å°æ—¶07åˆ†é’Ÿ18ç§’ â”‚
â”‚ 4    â”‚ ss:ss_00             â”‚ RUNNING â”‚ 3870884 â”‚ 2å°æ—¶07åˆ†é’Ÿ17ç§’ â”‚
â”‚ 5    â”‚ xray8:xray8_00       â”‚ RUNNING â”‚ 3835299 â”‚ 4å°æ—¶56åˆ†é’Ÿ50ç§’ â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ’¡ æç¤º: ä½¿ç”¨ 'sv start/stop/restart <åºå·>' æ¥æ§åˆ¶è¿›ç¨‹
ğŸ”§ é…ç½®: è®¾ç½®SUPERVISOR_HOSTç¯å¢ƒå˜é‡æ¥æŒ‡å®šSupervisoråœ°å€
```

### æ™ºèƒ½é…ç½®æ£€æµ‹è¾“å‡º

```
ğŸ”§ æ£€æµ‹Supervisoré…ç½®...
âœ… æ‰¾åˆ°é…ç½®æ–‡ä»¶: /etc/supervisor/supervisord.conf
âš ï¸  ç¼ºå°‘[inet_http_server]é…ç½®
ğŸ› ï¸  æ­£åœ¨æ·»åŠ RPCé…ç½®...
âœ… é…ç½®æ›´æ–°æˆåŠŸ
ğŸ”„ æ­£åœ¨é‡å¯SupervisoræœåŠ¡...
âœ… SupervisoræœåŠ¡é‡å¯æˆåŠŸ
```

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### æ—¥å¸¸è¿ç»´

```bash
# å¿«é€ŸæŸ¥çœ‹æ‰€æœ‰æœåŠ¡çŠ¶æ€
./sv status

# é‡å¯webæœåŠ¡ï¼ˆåºå·1ï¼‰
./sv restart 1

# é‡å¯æ‰€æœ‰æ•°æ®åº“æœåŠ¡ï¼ˆåºå·5-7ï¼‰
./sv restart 5-7

# æŸ¥çœ‹ç‰¹å®šæœåŠ¡çŠ¶æ€
./sv status | grep nginx
```

### æ‰¹é‡æ“ä½œ

```bash
# åœæ­¢æ‰€æœ‰æµ‹è¯•æœåŠ¡
./sv stop 8 10 12

# å¯åŠ¨æ‰€æœ‰æ ¸å¿ƒæœåŠ¡
./sv start 1-4

# é‡å¯å¤šä¸ªæŒ‡å®šæœåŠ¡
./sv restart 1 3 5-7 nginx

# åœæ­¢æ‰€æœ‰æœåŠ¡ï¼ˆä½¿ç”¨èŒƒå›´ï¼‰
./sv stop 1-20
```

### é—®é¢˜æ’æŸ¥

```bash
# æŸ¥çœ‹çŠ¶æ€å¼‚å¸¸çš„æœåŠ¡
./sv status

# é‡å¯é—®é¢˜æœåŠ¡
./sv restart 3

# æŸ¥çœ‹æœåŠ¡è¯¦ç»†ä¿¡æ¯
./sv status
```

### è¿œç¨‹æœåŠ¡å™¨ç®¡ç†

```bash
# è¿æ¥è¿œç¨‹SupervisoræœåŠ¡å™¨
SUPERVISOR_HOST="http://192.168.1.100:9001/RPC2" ./sv status

# å¸¦è®¤è¯çš„è¿œç¨‹è¿æ¥
SUPERVISOR_HOST="http://remote-server:9001/RPC2" \
SUPERVISOR_USER="admin" \
SUPERVISOR_PASSWORD="secret123" \
./sv restart 1-5
```

### ç³»ç»ŸæœåŠ¡ç®¡ç†

```bash
# å®‰è£…ä¸ºç³»ç»ŸæœåŠ¡ï¼Œå®ç°æŒä¹…åŒ–è¿è¡Œ
sudo ./sv service install

# å¯ç”¨å¼€æœºè‡ªå¯åŠ¨
sudo systemctl enable sv  # Linux
# æˆ–åœ¨WindowsæœåŠ¡ä¸­è®¾ç½®ä¸ºè‡ªåŠ¨å¯åŠ¨

# ç®¡ç†ç³»ç»ŸæœåŠ¡
./sv service start
./sv service status
./sv service stop
./sv service restart

# å¸è½½ç³»ç»ŸæœåŠ¡
sudo ./sv service uninstall
```
```

## ğŸ› ï¸ å¼€å‘

### å¼€å‘ç¯å¢ƒè®¾ç½®

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/x1t/sv.git
cd sv

# å®‰è£…ä¾èµ–
go mod tidy

# å¼€å‘è¿è¡Œ
go run main.go status

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
go test -v

# æŒ‰åŒ…è¿è¡Œæµ‹è¯•
go test -v ./pkg/cli/
go test -v ./pkg/supervisor/
go test -v ./pkg/utils/

# è¿è¡Œç‰¹å®šæµ‹è¯•å‡½æ•°
go test -run TestMain_Help
go test -run TestProcessControl
go test -run TestConfigDetector

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
go test -coverprofile=coverage.out
go tool cover -html=coverage.out -o coverage.html

# åŸºå‡†æµ‹è¯•
go test -bench=. -benchmem

# ä¾èµ–ç®¡ç†
go mod tidy      # æ•´ç†ä¾èµ–
go mod verify    # éªŒè¯ä¾èµ–
go mod graph     # æŸ¥çœ‹ä¾èµ–å›¾
```

### ç¼–è¯‘é€‰é¡¹

```bash
# å¼€å‘ç¯å¢ƒè¿è¡Œ
go run main.go <command>

# ç”Ÿäº§ç¼–è¯‘ï¼ˆå‡å°äºŒè¿›åˆ¶æ–‡ä»¶å¤§å°ï¼‰
go build -ldflags="-s -w" -o sv main.go

# ä½¿ç”¨æ„å»ºè„šæœ¬ï¼ˆè¾“å‡ºåˆ°distç›®å½•ï¼‰
./build.sh

# äº¤å‰ç¼–è¯‘
GOOS=linux GOARCH=amd64 go build -o sv-linux-amd64 main.go
GOOS=windows GOARCH=amd64 go build -o sv-windows-amd64.exe main.go
GOOS=darwin GOARCH=amd64 go build -o sv-darwin-amd64 main.go

# å…¶ä»–å¹³å°
GOOS=freebsd GOARCH=amd64 go build -o sv-freebsd-amd64 main.go
GOOS=openbsd GOARCH=amd64 go build -o sv-openbsd-amd64 main.go
```

### ä¾èµ–ç®¡ç†

```bash
# æ•´ç†ä¾èµ–
go mod tidy

# éªŒè¯ä¾èµ–
go mod verify

# æŸ¥çœ‹ä¾èµ–å›¾
go mod graph
```

### é¡¹ç›®ç»“æ„è¯¦è§£

```
pkg/
â”œâ”€â”€ cli/                   # CLIåº”ç”¨å±‚
â”‚   â”œâ”€â”€ app.go            # ä¸»åº”ç”¨é€»è¾‘ï¼ˆ84è¡Œï¼‰
â”‚   â””â”€â”€ renderer.go       # æ¸²æŸ“å’Œæ ¼å¼åŒ–ï¼ˆ116è¡Œï¼‰
â”œâ”€â”€ supervisor/            # Supervisoræ ¸å¿ƒåŠŸèƒ½
â”‚   â”œâ”€â”€ rpc_client.go     # XML-RPCå®¢æˆ·ç«¯ï¼ˆ335è¡Œï¼‰
â”‚   â”œâ”€â”€ types.go          # æ•°æ®ç»“æ„å®šä¹‰ï¼ˆ96è¡Œï¼‰
â”‚   â”œâ”€â”€ config_detector.go # é…ç½®æ£€æµ‹å’Œè‡ªåŠ¨é…ç½®ï¼ˆ299è¡Œï¼‰
â”‚   â”œâ”€â”€ service_manager.go # ç³»ç»ŸæœåŠ¡ç®¡ç†ï¼ˆ429è¡Œï¼‰
â”‚   â””â”€â”€ process_control.go # è¿›ç¨‹æ§åˆ¶é€»è¾‘ï¼ˆ119è¡Œï¼‰
â””â”€â”€ utils/                 # å·¥å…·å‡½æ•°
    â””â”€â”€ common.go         # é€šç”¨å·¥å…·å‡½æ•°å’Œæ•°æ®ç»“æ„ï¼ˆ499è¡Œï¼‰
```

## ğŸ” æ•…éšœæ’é™¤

### è¿æ¥é—®é¢˜

å¦‚æœé‡åˆ°è¿æ¥é”™è¯¯ï¼š

1. ç¡®ä¿SupervisoræœåŠ¡æ­£åœ¨è¿è¡Œ
2. æ£€æŸ¥ç«¯å£é…ç½®ï¼ˆé»˜è®¤9001ï¼‰
3. ç¡®è®¤é˜²ç«å¢™è®¾ç½®
4. éªŒè¯è®¤è¯ä¿¡æ¯
5. å·¥å…·ä¼šè‡ªåŠ¨å°è¯•é…ç½®RPCåŠŸèƒ½

### é…ç½®é—®é¢˜

å·¥å…·ä¼šè‡ªåŠ¨å¤„ç†å¤§éƒ¨åˆ†é…ç½®é—®é¢˜ï¼š
- **æ£€æµ‹ç°æœ‰é…ç½®**: è‡ªåŠ¨æ‰«æSupervisoré…ç½®æ–‡ä»¶
- **æ·»åŠ ç¼ºå¤±é…ç½®**: è‡ªåŠ¨æ·»åŠ RPCå’ŒHTTPæœåŠ¡å™¨é…ç½®
- **é…ç½®éªŒè¯**: éªŒè¯é…ç½®æ–‡ä»¶çš„æ­£ç¡®æ€§
- **ä¼˜é›…é™çº§**: é…ç½®å¤±è´¥æ—¶å›é€€åˆ°å‘½ä»¤è¡Œæ¨¡å¼

### åŒæ¨¡å¼æ¶æ„

å·¥å…·é‡‡ç”¨æ™ºèƒ½åŒæ¨¡å¼æ¶æ„ï¼š
- **RPCæ¨¡å¼**: ä¼˜å…ˆä½¿ç”¨XML-RPCé€šä¿¡ï¼Œæ€§èƒ½æ›´ä½³
- **å‘½ä»¤è¡Œæ¨¡å¼**: è‡ªåŠ¨å›é€€åˆ°supervisorctlå‘½ä»¤ï¼Œç¡®ä¿å…¼å®¹æ€§
- **æ™ºèƒ½åˆ‡æ¢**: é€æ˜æ¨¡å¼åˆ‡æ¢ï¼Œç”¨æˆ·æ— æ„ŸçŸ¥

### æ‰‹åŠ¨é…ç½®

å¦‚æœè‡ªåŠ¨é…ç½®å¤±è´¥ï¼Œå¯ä»¥æ‰‹åŠ¨é…ç½®`supervisord.conf`ï¼š

```ini
[inet_http_server]
port=127.0.0.1:9001
username=user
password=pass

[rpcinterface:supervisor]
supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface

[supervisord]
rpcinterface_files = supervisord
```

### ç³»ç»ŸæœåŠ¡é—®é¢˜

```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
./sv service status

# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
journalctl -u sv -f  # Linux
# æˆ–åœ¨Windowsäº‹ä»¶æŸ¥çœ‹å™¨ä¸­æŸ¥çœ‹

# é‡æ–°å®‰è£…æœåŠ¡
./sv service uninstall
./sv service install
```

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

### å¼€å‘æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

### ä»£ç è§„èŒƒ

- éµå¾ªGoè¯­è¨€ä»£ç è§„èŒƒ
- æ‰€æœ‰ç”¨æˆ·ç•Œé¢ä½¿ç”¨ä¸­æ–‡
- æ ¸å¿ƒåŠŸèƒ½å¿…é¡»æœ‰æµ‹è¯•è¦†ç›–
- ä¿æŒæ¨¡å—åŒ–æ¶æ„è®¾è®¡
- æ–°åŠŸèƒ½åº”å›´ç»•ç®€åŒ–Supervisorç®¡ç†çš„æ ¸å¿ƒä»·å€¼

## ğŸ”— ç›¸å…³é“¾æ¥

- [Supervisorå®˜æ–¹æ–‡æ¡£](http://supervisord.org/)
- [Goè¯­è¨€å®˜ç½‘](https://golang.org/)
- [é—®é¢˜åé¦ˆ](https://github.com/x1t/sv/issues)
- [é¡¹ç›®ä¸»é¡µ](https://github.com/x1t/sv)

## ğŸ“„ è®¸å¯è¯

MIT License

---

**äº«å—ä¾¿æ·çš„è¿›ç¨‹ç®¡ç†ä½“éªŒï¼** ğŸ‰

### æ ¸å¿ƒä»·å€¼

è®°ä½è¿™ä¸ªå·¥å…·çš„å¼ºå¤§ä¹‹å¤„åœ¨äºï¼š
- **åºå·åŒ–æ“ä½œ** - è®©è¿›ç¨‹ç®¡ç†æ›´åŠ é«˜æ•ˆ
- **æ™ºèƒ½é…ç½®** - è‡ªåŠ¨æ£€æµ‹å’Œé…ç½®ç¯å¢ƒ
- **å®Œç¾æ˜¾ç¤º** - ç¾è§‚çš„è¡¨æ ¼å’Œç²¾ç¡®çš„æ—¶é—´æ ¼å¼
- **åŒæ¨¡å¼æ¶æ„** - ç¡®ä¿åœ¨å„ç§ç¯å¢ƒä¸‹éƒ½èƒ½æ­£å¸¸å·¥ä½œ

è®©å¤æ‚çš„Supervisorè¿›ç¨‹ç®¡ç†å˜å¾—ç®€å•é«˜æ•ˆï¼âœ¨